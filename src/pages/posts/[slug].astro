---
import Layout from '../../layouts/Layout.astro';
import { getCollection, type CollectionEntry } from 'astro:content';

export async function getStaticPaths() {
  const posts = await getCollection('posts');
  return posts.map((post: CollectionEntry<'posts'>) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

// Añadir tipo explícito para el parámetro post
const { post } = Astro.props as { post: CollectionEntry<'posts'> };
const { Content } = await post.render();
---

<Layout>
  <div class="max-w-4xl mx-auto px-4 py-8">
    <article class="bg-white rounded-lg shadow-lg overflow-hidden">
      <div class="text-center p-8 border-b border-gray-200">
        {post.data.image && (
          <img src={post.data.image.url} alt={post.data.image.alt} class="w-full max-h-96 object-cover rounded-lg mx-auto mb-6" />
        )}
        <h1 class="text-2xl md:text-4xl font-bold text-gray-900 mb-4">{post.data.title}</h1>
        <div class="text-gray-600 mb-4">
          Publicado el: {new Date(post.data.pubDate).toLocaleDateString('es-ES')}
          {post.data.author && (
            <span> por <a href="/autores/sebastian-lagos" class="text-purple-700 hover:underline">Sebastián Lagos</a></span>
          )}
        </div>
        <div class="flex flex-wrap justify-center gap-2 mt-4">
          {post.data.tags && post.data.tags.map((tag: string) => (
            <span class="bg-gray-100 text-gray-800 text-xs px-3 py-1 rounded-full">#{tag}</span>
          ))}
        </div>
      </div>
      
      <div class="p-8 prose prose-lg max-w-none">
        <Content />
      </div>
    </article>
  </div>
</Layout>

<style>
  /* Custom style overrides can still be added here if needed */
</style>